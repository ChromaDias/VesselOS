#!/usr/bin/env bash
set -euo pipefail

# Block committing Windows Zone.Identifier artifacts materialized as files.
problematic=$(git diff --cached --name-only --diff-filter=d -z | tr '\0' '\n' | grep -E ':[Zz]one\.Identifier(\b|:)' || true)
if [ -n "$problematic" ]; then
  echo "Error: Zone.Identifier artifacts detected in commit:" >&2
  echo "$problematic" >&2
  echo "Remove them (e.g., run tools/remove-zone-identifiers.sh) before committing." >&2
  exit 1
fi

exit 0
